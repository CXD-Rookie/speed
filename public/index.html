<!--
 * @Author: steven libo@rongma.com
 * @Date: 2024-05-21 20:47:13
 * @LastEditors: steven libo@rongma.com
 * @LastEditTime: 2024-11-01 16:16:15
 * @FilePath: \speed\public\index.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- %PUBLIC_URL% 表示public文件夹路径 -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <!-- 开启理想视口，用于移动端适配 -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- 配置浏览器页签+地址栏颜色（仅支持安卓手机） -->
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <title>React App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <script type="text/javascript" src="https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js"></script>
    <script src="https://turing.captcha.qcloud.com/TCaptcha.js"></script>
    <script>
      window.VERSION = ''; // 添加版本号
    </script>
  </head>
  <body>
    
    <!-- 浏览器不支持js脚本则展示标签中的内容 -->
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script>
    // 获取当前 URL
    const currentUrl = window.location.href;

    // 获取时间戳
    const timestamp = new Date().getTime(); // 示例时间戳，可替换为 `new Date().getTime()`

    // 拆分 base URL 和哈希路由部分
    let [baseUrl, hashRoute] = currentUrl.split('#');

    // 确保哈希路由部分以 `/` 开头
    hashRoute = hashRoute ? hashRoute.split('?')[0] : '';
    if (hashRoute && !hashRoute.startsWith('/')) {
        hashRoute = `/${hashRoute}`;
    }

    // 构建新的 URL，将时间戳拼接在哈希部分
    const newUrl = `${baseUrl}#${hashRoute}?v=${timestamp}`;

    // 更新页面地址，不会重新加载页面
    window.history.replaceState(null, '', newUrl);

    // 输出最终带有版本号的 URL
    console.log("=============新111url==============", newUrl);

    </script>
    <script>
      var _czc = _czc || [];
      // 三方埋点
      (function () {
        var um = document.createElement("script");
        um.src = "https://v1.cnzz.com/z.js?id=1281368044&async=1";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(um, s);
      })();

      </script>
  </body>
</html>

